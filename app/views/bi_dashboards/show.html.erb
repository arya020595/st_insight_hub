<div class="container-fluid h-100">
  <div class="row mb-3">
    <div class="col">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><%= link_to "Dashboard", dashboard_path %></li>
          <li class="breadcrumb-item"><%= @project.name %></li>
          <li class="breadcrumb-item active" aria-current="page"><%= @dashboard.name %></li>
        </ol>
      </nav>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col">
      <h4 class="mb-0">
        <%= project_icon(@project) %>
        <%= @dashboard.name %>
      </h4>
      <p class="text-muted small mb-0"><%= @project.name %></p>
    </div>
  </div>
  <div class="row flex-grow-1">
    <div class="col">
      <div class="card h-100 shadow-sm">
        <div class="card-body p-0">
          <% if @dashboard.embed_type == 'iframe' %>
            <% if safe_url(@dashboard.embed_url) %>
              <iframe
                src="<%= safe_url(@dashboard.embed_url) %>"
                width="100%"
                height="100%"
                style="min-height: calc(100vh - 220px); border: none;"
                allowfullscreen
                loading="lazy"
                sandbox="allow-scripts allow-same-origin allow-forms">
              </iframe>
            <% else %>
              <div class="alert alert-danger">Invalid embed URL</div>
            <% end %>
          <% else %>
            <div class="p-4 text-center">
              <p class="text-muted">Embed URL:</p>
              <% if safe_url(@dashboard.embed_url) %>
                <%= link_to @dashboard.embed_url, safe_url(@dashboard.embed_url), target: "_blank", rel: "noopener noreferrer", class: "btn btn-primary" %>
              <% else %>
                <div class="alert alert-danger">Invalid embed URL</div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
