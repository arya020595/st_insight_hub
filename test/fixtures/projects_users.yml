# Join table for projects and users (has_and_belongs_to_many)

# ============================================================================
# PROJECT-USER ASSIGNMENTS - Based on Business Rules:
# - Superadmin has access to all projects (bypasses checks)
# - Client users only see projects they are explicitly assigned to
# - Users can only be assigned to projects from their company
# ============================================================================

# Acme Corporation: Sales Analytics Project
# Assigned to: John Doe (client_acme_john)
john_sales_analytics:
  project_id: <%= ActiveRecord::FixtureSet.identify(:active_project) %>
  user_id: <%= ActiveRecord::FixtureSet.identify(:client_acme_john) %>
  created_at: <%= Time.current %>
  updated_at: <%= Time.current %>

# Acme Corporation: Marketing Insights Project
# Assigned to: John Doe, Jane Smith
john_marketing:
  project_id: <%= ActiveRecord::FixtureSet.identify(:marketing_project) %>
  user_id: <%= ActiveRecord::FixtureSet.identify(:client_acme_john) %>
  created_at: <%= Time.current %>
  updated_at: <%= Time.current %>

jane_marketing:
  project_id: <%= ActiveRecord::FixtureSet.identify(:marketing_project) %>
  user_id: <%= ActiveRecord::FixtureSet.identify(:client_acme_jane) %>
  created_at: <%= Time.current %>
  updated_at: <%= Time.current %>

# DataFlow Solutions: Customer Insights Project
# Assigned to: Alice Chen, Mike Johnson
alice_customer_insights:
  project_id: <%= ActiveRecord::FixtureSet.identify(:dataflow_project) %>
  user_id: <%= ActiveRecord::FixtureSet.identify(:client_dataflow_alice) %>
  created_at: <%= Time.current %>
  updated_at: <%= Time.current %>

mike_customer_insights:
  project_id: <%= ActiveRecord::FixtureSet.identify(:dataflow_project) %>
  user_id: <%= ActiveRecord::FixtureSet.identify(:client_dataflow_mike) %>
  created_at: <%= Time.current %>
  updated_at: <%= Time.current %>

# NOTE: Jane Smith (client_acme_jane) is NOT assigned to Sales Analytics
# This tests that unassigned projects are not accessible
